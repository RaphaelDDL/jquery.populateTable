<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Jquery.populatetable by RaphaelDDL</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Jquery.populatetable</h1>
        <h2>jQuery Plugin to populate tables based on JSON Object. Soon XML support also.</h2>
        <a href="https://github.com/RaphaelDDL/jquery.populateTable" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="jquery-populatetable-by-raphaelddl" class="anchor" href="#jquery-populatetable-by-raphaelddl"><span class="octicon octicon-link"></span></a>jQuery populateTable by <a href="http://raphaelddl.com">RaphaelDDL</a>
</h1>

<blockquote>
<p>README is a permanent WIP. Suggestions and feedback are always welcome.</p>
</blockquote>

<p>A jQuery plugin that populate tables in any way user want, including: adding html, concatenating values into a single column, setting default value when key/value is null and other stuff.</p>

<h2>
<a name="demo" class="anchor" href="#demo"><span class="octicon octicon-link"></span></a>Demo</h2>

<p>Demo of the Example below in this readme: <a href="http://portableideas.net/projects/jquery.populateTable/demo/JSON.html">Twitter JSON</a></p>

<p><a href="http://portableideas.net/projects/jquery.populateTable/demo/XML.html">XML using xml2json</a></p>

<h2>
<a name="installation-and-options-explanation" class="anchor" href="#installation-and-options-explanation"><span class="octicon octicon-link"></span></a>Installation and Options Explanation</h2>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<ul>
<li>Include jQuery library in your page header if you haven't done so. <code>&lt;script type="text/javascript" src="path/to/jquery-1.7.1.min.js"&gt;&lt;/script&gt;</code>. Tested only in 1.7.1, need to check on lower ones.</li>
<li>Include populateTable .js file in your page header also. <code>&lt;script type="text/javascript" src="path/to/jquery.populateTable-0.1.4.min.js"&gt;&lt;/script&gt;</code>
</li>
<li>This plugin supports <a href="http://tablesorter.com">TableSorter by Christian Bach</a> so if you want, add it also <code>&lt;script type="text/javascript" src="path/to/jquery.tablesorter.min.js"&gt;&lt;/script&gt;</code>
</li>
</ul><p>Currently only JSON objects are supported. I will extend it for XML also. However, while we don't have this option, you can use the epic <a href="http://www.fyneworks.com/jquery/xml-to-json/">jQuery XML to JSON Plugin</a> to transform XML into JSON object.</p>

<h2>
<a name="markup" class="anchor" href="#markup"><span class="octicon octicon-link"></span></a>Markup</h2>

<pre><code>$('#yourTable').populateTable( JSON_OBJECT ,{ OPTIONS });
</code></pre>

<p>The <code>JSON_OBJECT</code> can be obtained by using <code>$.parseJSON()</code> in a string containing a json structure or in the most common method, with the xhr object returned by an ajax call.</p>

<hr><h3>
<a name="options--tableheads" class="anchor" href="#options--tableheads"><span class="octicon octicon-link"></span></a>Options : tableHeads</h3>

<pre><code>    tableHeads: { 
        values: [
            {headText:'User'},
            {headText: 'Tweet'},
            {headText:'Metadata'}
        ]
    }
</code></pre>

<p>In <code>tableHeads</code> is where you setup your table's <code>&lt;thead&gt;</code> and <code>&lt;tfoot&gt;</code>. Each <code>headText</code> is one Column's header/footer. Remember to use the same number of <code>headText</code> in <code>dataRepeat &gt; values &gt; fieldTxt</code>.</p>

<h3>
<a name="options--tabledata" class="anchor" href="#options--tabledata"><span class="octicon octicon-link"></span></a>Options : tableData</h3>

<pre><code>    tableData: {
        emptyMsg: 'N&amp;atilde;o h&amp;aacute; dados dispon&amp;iacute;veis',
        dataRoot:'results',
        dataRepeat: {
        values: [
            {fieldTxt: '&lt;img src="%{profile_image_url}" style="float:left;width:32px;height:32px;margin:0 10px 5px 0;" alt="" /&gt;&lt;strong&gt;%{from_user_name}&lt;/strong&gt;&lt;br /&gt;&lt;a href="http://twitter.com/%{from_user}"&gt;@%{from_user}&lt;/a&gt;', emptyTxt:'N/D'},
            {fieldTxt: '%{text}', emptyTxt:'N/D'},
            {fieldTxt: '%{metadata.result_type}', emptyTxt:'N/D'}
            ]
        }
    }
</code></pre>

<p>In <code>tableData</code> you will define:</p>

<ul>
<li>
<code>emptyMsg</code>: The message to show when JSON is empty or null;</li>
<li>
<code>dataRoot</code>: The root of the info, normally the KEY where all object childs with the key/values are stored. See example below to understand better.</li>
<li>
<code>dataRepeat</code>: Here is where, inside the <code>values</code>, declare your columns. See next.</li>
<li>
<code>dataRepeat values</code>: Each object, containing at least <code>fieldTxt</code>, will be each column. The number needs to be the same of <code>tableHeads</code>, or i will warn you (and will mess up the table, since there is no colspan).

<ul>
<li>
<code>fieldTxt</code>: Here is where magic happens. You can write anything you want, even HTML. And the script will fill the info you want replacing <code>%{A_JSON_KEY}</code> for the desired value. You can access further childs by separating key names with dot <code>.</code>. So, if your JSON have a key with an object with more key/values instead of string, you can use <code>%{1ST_LVL_KEY.CHILD_KEY}</code> and will work. Does not matter the depth, you can access any child within another, as long as is an Object (That is, <code>{key:value,key2:value2}</code>) and not an Array of Objects (<code>[{key:value},{key:value}]</code>).</li>
<li>
<code>emptyTxt</code>: If the value of the <code>%{A_JSON_KEY}</code> is null, the value set in <code>emptyTxt</code> will be used in it's place.</li>
</ul>
</li>
</ul><h3>
<a name="options--callbacks" class="anchor" href="#options--callbacks"><span class="octicon octicon-link"></span></a>Options : Callbacks</h3>

<pre><code>    tablePreCallback: {
        tbCb: testcallback
    }
</code></pre>

<p>In <code>tablePreCallback</code> you can call a function before the tablesorter is applied. This is good when, for e.g. your date comes in UNIX and you need to change it to YYYY/MM/dd so tablesorter can successfully sort it.</p>

<hr><pre><code>    tableCallback: {
        tbCb: testcallback
    }
</code></pre>

<p>In <code>tableCallback</code> you can call a function after everything is done. Good when you need to call an alert, or apply a bind in some element inside the table that you've added it's HTML in <code>fieldTxt</code>.</p>

<h3>
<a name="options--tablesorter" class="anchor" href="#options--tablesorter"><span class="octicon octicon-link"></span></a>Options : tableSorter</h3>

<pre><code>    tableSorter: {
        applyTS: false,
        tableSorterOpt: {
            widthFixed: true
        }
    },
</code></pre>

<p>In <code>tableSorterOpt</code> you can turn tablesorter support on by setting <code>applyTS: true</code>. In <code>tableSorterOpt</code> object, you can pass any tablesorter options you want and they will be used when i call tablesorter function. <a href="http://tablesorter.com/docs/#Configuration">See TableSorter Documentation</a></p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples:</h2>

<h3>
<a name="example-twitters-search-json" class="anchor" href="#example-twitters-search-json"><span class="octicon octicon-link"></span></a>Example: Twitter's Search JSON</h3>

<p>Considering you already know what is JSON and understand it's structure, let's take Twitter's Search JSON as example (removed some info not needed), since it's well constructed and easy to understand:</p>

<pre><code>{
  "page": 1, 
  "query": "hadouken", 
  "results": [
    {
      "created_at": "Thu, 19 Jan 2012 16:35:44 +0000", 
      "from_user": "juliamde", 
      "from_user_id": 109691553, 
      "from_user_id_str": "109691553", 
      "from_user_name": "Julia Medeiros", 
      "geo": null, 
      "id": 160037737272049664, 
      "id_str": "160037737272049664", 
      "iso_language_code": "pt", 
      "metadata": {
        "result_type": "recent"
      }, 
      "profile_image_url": "http://a0.twimg.com/profile_images/1723656611/P1000839_normal.JPG", 
      "profile_image_url_https": "https://si0.twimg.com/profile_images/1723656611/P1000839_normal.JPG", 
      "source": "&amp;lt;a href=&amp;quot;http://twitter.com/&amp;quot;&amp;gt;web&amp;lt;/a&amp;gt;", 
      "text": "\u00f3i meu deus meu cachorro deu um  hadouken numa mosca", 
      "to_user": null, 
      "to_user_id": null, 
      "to_user_id_str": null, 
      "to_user_name": null
    }, 
    {
      "created_at": "Thu, 19 Jan 2012 16:34:34 +0000", 
      "from_user": "takumi505", 
      "from_user_id": 99673686, 
      "from_user_id_str": "99673686", 
      "from_user_name": "\u0451", 
      "geo": null, 
      "id": 160037441795932162, 
      "id_str": "160037441795932162", 
      "iso_language_code": "ja", 
      "metadata": {
        "result_type": "recent"
      }, 
      "profile_image_url": "http://a0.twimg.com/profile_images/1320699394/101120_0036_01_normal.jpg", 
      "profile_image_url_https": "https://si0.twimg.com/profile_images/1320699394/101120_0036_01_normal.jpg", 
      "source": "&amp;lt;a href=&amp;quot;http://twtr.jp&amp;quot; rel=&amp;quot;nofollow&amp;quot;&amp;gt;Keitai Web&amp;lt;/a&amp;gt;", 
      "text": "\u4eca\u5e74\u306f\uff7b\uff8f\uff7f\uff86,\uff8c\uff7c\uff9e\uff9b\uff6f\uff78\u304b\u306bfoo fighters,\uff7b\uff8f\uff7f\uff86\u306b\u306fHADOUKEN!,slipknot,maroon5\u306a\u4e88\u611f\u304c\u3059\u308b blink-182\u3082\u6765\u305d\u3046\u306a\u4e88\u611f\u304c\u3042\u308b", 
      "to_user": null, 
      "to_user_id": null, 
      "to_user_id_str": null, 
      "to_user_name": null
    }
  ], 
  "results_per_page": 15
}
</code></pre>

<p>We'll use <code>results</code> as our root and it's child objects as our data for rows. The aim is create a table with user image, name and @, and the tweet text.</p>

<ol>
<li>Create an empty table somewhere in your page and give it an ID. I recommend not using class as will create tables with the same content. Unless that's what you expect :)</li>
</ol><p><code>&lt;table class="zebra-striped" id="tableJSON"&gt;&lt;/table&gt;</code></p>

<ol>
<li>
<p>Now get your JSON with your preferred way (AJAX call, for e.g.) and call populateTable in the <code>success</code>. (I like to separate the call from populateTable using a function not mess with AJAX but it's up to you).</p>

<pre><code>    $.ajax({
        url: 'http://search.twitter.com/search.json',
        dataType: 'jsonp',
        data: 'q=hadouken',
        error: function(xhr, textStatus, errorThrown){
            console.log('===&gt; Error');
            //some error handler
        },
        success: function(xhr, textStatus, errorThrown) {
            console.log('===&gt; Success');

            //Here we call populateTable. As i stated, i let in a function to not mess
            createTableJSON(xhr);
        }
    });

    function createTableJSON(xhrJson){
        $('#tableJSON').populateTable(xhrJson,{
            tableSorterOpt:{
                widthFixed: true
            }, tableHeads: {
                values: [
                    {headText:'User'},
                    {headText: 'Tweet'},
                    {headText:'Metadata'}
                ]
            },tableData: {
                emptyMsg: 'N&amp;atilde;o h&amp;aacute; dados dispon&amp;iacute;veis',
                dataRoot:'results',
                dataRepeat: {
                values: [
                    {fieldTxt: '&lt;img src="%{profile_image_url}" style="float:left;width:32px;height:32px;margin:0 10px 5px 0;" alt="" /&gt;&lt;strong&gt;%{from_user_name}&lt;/strong&gt;&lt;br /&gt;&lt;a href="http://twitter.com/%{from_user}"&gt;@%{from_user}&lt;/a&gt;', emptyTxt:'N/D'},
                    {fieldTxt: '%{text}', emptyTxt:'N/D'},
                    {fieldTxt: '%{metadata.result_type}', emptyTxt:'N/D'}
                    ]
                }
            }
        });
    }
</code></pre>
</li>
</ol><p><a href="http://portableideas.net/projects/jquery.populateTable/demo/JSON.html">See script in action</a></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/RaphaelDDL/jquery.populateTable/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/RaphaelDDL/jquery.populateTable/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/RaphaelDDL/jquery.populateTable"></a> is maintained by <a href="https://github.com/RaphaelDDL">RaphaelDDL</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>